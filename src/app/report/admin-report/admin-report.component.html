<div class="filter-container">
    <input
      type="text"
      [(ngModel)]="usernameFilter"
      (input)="filterAppointments()"
      placeholder="Filter by username"
      class="filter-input"
    />
 

   <!-- Role Filter -->
   <select [(ngModel)]="roleFilter" (change)="filterAppointments()" class="filter-input filter-select">
    <option value="">All Roles</option>
    <option value="admin">Admin</option>
    <option value="sub_admin">Sub Admin</option>
    <option value="super_admin">Super Admin</option>
    <option value="doctor">Doctor</option>
  </select>
</div>
  
<div class="table-container">
    <table class="appointment-table">
      <thead>
        <tr>
          <th>No</th>
          <th (click)="sortBy('username')" style="cursor: pointer;">
            Admin Name
            <span *ngIf="sortColumn === 'username' && sortDirection === 'asc'">&#9650;</span>
            <span *ngIf="sortColumn === 'username' && sortDirection === 'desc'">&#9660;</span>
          </th>
          <th>
            Role
          </th>
          <th>Patient Name</th>
          <th>Doctor Name</th>
          <!-- <th>Therapy</th> -->
          <th (click)="sortBy('created_at')">
            Requested Date
            <span *ngIf="sortColumn === 'created_at' && sortDirection === 'asc'">&#9650;</span>
            <span *ngIf="sortColumn === 'created_at' && sortDirection === 'desc'">&#9660;</span></th>
            <th (click)="sortBy('updated_at')">
                Updated Date
                <span *ngIf="sortColumn === 'updated_at' && sortDirection === 'asc'">&#9650;</span>
                <span *ngIf="sortColumn === 'updated_at' && sortDirection === 'desc'">&#9660;</span></th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of getPaginatedAppointments(); let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{appointment.username}}</td>
          <td>{{appointment.user?.role}}</td>
          <td>{{ appointment.patientName }}</td>
          <td>{{ appointment.doctorName }}</td>
          <!-- <td>{{ appointment.department }}</td> -->
          <td>{{ appointment.created_at }}</td>
          <td>{{ appointment.updated_at }}</td>
          <td>
            <span class="status-badge" [ngClass]="getStatusClass(appointment.status)">
                {{ appointment.status }}
              </span>
              
          </td>
        </tr>
      </tbody>
    </table>
  
    <!-- Pagination Controls -->
    <div class="pagination">
      <button class="pagination-btn prev" (click)="prevPage()" [disabled]="currentPage === 1">←</button>
      <button class="pagination-btn next" (click)="nextPage()" [disabled]="currentPage === totalPages">→</button>
      <div class="page-info">
        Page 
        <input type="number" [(ngModel)]="currentPage" min="1" [max]="totalPages" class="page-input" (change)="onPageChange()">
        of {{ totalPages }}
      </div>
    </div>
  </div>
  